Title,Body,Labels
P0-0.1 Create repository & base files,"Initialize repo `vibebeat`. Add .editorconfig, .gitignore, README.md.","phase:0,area:repo,type:chore,priority:P1"
P0-0.2 Add Prettier/ESLint/Husky & CI,"Configure Prettier, ESLint (TS), Husky pre-commit (format+lint). Add CI workflow (install→build→test).","phase:0,area:tooling,type:chore,priority:P1"
P0-0.3 Scaffold app shell with Tailwind,"Create minimal app with Top bar, Left nav, Main outlet. Configure Tailwind.","phase:0,area:ui,type:feature,priority:P1"
P0-0.4 Create folder structure,"Create /src/core, /src/features, /src/shared, /public/assets/kits, /public/assets/instruments.","phase:0,area:repo,type:chore,priority:P2"
P0-0.5 Install dependencies,"Install uuid, zod, idb-keyval, @ffmpeg/ffmpeg, @supabase/supabase-js. Add LICENSE.md and CREDITS.md.","phase:0,area:deps,type:chore,priority:P1"
P1-1.1 Define TypeScript models,"Add models: Project, Track (DRUM|KEYS|AUDIO), Pattern, Note, StepHit, Mixer, Clip, ExportOptions.","phase:1,area:models,type:feature,priority:P1"
P1-1.2 Add Zod schemas for AI tools,Implement DrumPatternInput/Output and MelodyInput/Output with strict validation.,"phase:1,area:ai,type:feature,priority:P1"
P1-1.3 Implement reactive state store,"Create lightweight store for project, transport, selection. Include basic unit tests.","phase:1,area:state,type:feature,priority:P2"
P2-2.1 AudioService with latency readout,Init/resume/suspend AudioContext; expose outputLatency; show in UI.,"phase:2,area:audio,type:feature,priority:P1"
P2-2.2 SampleCache loader,Implement AudioBuffer cache with concurrency cap; prefetch factory kits.,"phase:2,area:audio,type:feature,priority:P2"
P2-2.3 Worklet scheduler + metronome,Add AudioWorklet processor and host scheduler; stable metronome for 60s.,"phase:2,area:audio,type:feature,priority:P1"
P2-2.4 Pad trigger & grid playback,"Pad hit playback with velocity; 1/16 grid, 2–8 bars, swing.","phase:2,area:audio,type:feature,priority:P1"
P2-2.5 Mixer lite,Track gain/pan; master soft-clip guard to ~-1dBTP.,"phase:2,area:audio,type:feature,priority:P2"
P2-2.6 Latency Mode toggle,Low vs Stable modes with live param updates.,"phase:2,area:audio,type:feature,priority:P2"
P3-3.1 Pads view UI,"4x4 pads, keyboard mappings, velocity via press duration/modifier, mute/solo.","phase:3,area:ui,type:feature,priority:P1"
P3-3.2 Step sequencer,1/16 grid with per-step velocity lane; bar selector 2–8.,"phase:3,area:ui,type:feature,priority:P1"
P3-3.3 Swing & Quantize controls,Swing 0–60%; Quantize 100/75/50/25 with live record quantize.,"phase:3,area:ui,type:feature,priority:P2"
P3-3.4 Keys view UI,Piano UI; scale lock; Z/X octave; record/overdub into loop.,"phase:3,area:ui,type:feature,priority:P1"
P4-4.1 Mic permission & setup,Add 'Enable Microphone' button; request getUserMedia({audio:true}); create MediaStreamAudioSourceNode.,"phase:4-recording,area:audio,type:feature,priority:P1"
P4-4.2 Monitor & input gain,"Input meter (RMS/peak), gain slider, Monitor toggle with feedback warning.","phase:4-recording,area:audio,type:feature,priority:P1"
P4-4.3 Bar-sync record controls,Count-in (1 bar) toggle; Record on next downbeat; elapsed bars/beats display.,"phase:4-recording,area:audio,type:feature,priority:P1"
P4-4.4 Capture pipeline,Record via Worklet or MediaRecorder; normalize to project sample rate; waveform preview on stop.,"phase:4-recording,area:audio,type:feature,priority:P1"
P4-4.5 Post-record actions,Auto-trim silence; optional Quantize-to-bar; detect BPM/key (heuristic). Save clip to project.,"phase:4-recording,area:audio,type:feature,priority:P2"
P4-4.6 Assign to Pad/Keys,Send to Pad (one-shot or slice-mapped) or Keys (auto-map slices across keys).,"phase:4-recording,area:ui,type:feature,priority:P1"
P4-4.7 Storage for recordings,Anonymous: blob:// in local save. Logged-in: upload to Supabase Storage; store path in project.,"phase:4-recording,area:storage,type:feature,priority:P2"
P4-4.8 Mobile/iOS quirks,User gesture to init audio; advise headphones; verify record→assign→play.,"phase:4-recording,area:qa,type:task,priority:P2"
P5-5.1 Upload & waveform,Drag-drop WAV/MP3; decode & render waveform.,"phase:5,area:ui,type:feature,priority:P1"
P5-5.2 Trim & Trim Silence,Start/end handles; threshold-based trim.,"phase:5,area:ui,type:feature,priority:P2"
P5-5.3 Transient slice & map to pads,Energy-based detection; show 3 slice sets; apply to pads.,"phase:5,area:ui,type:feature,priority:P2"
P5-5.4 Pitch & Stretch (basic),Pitch ±12 (resample) and tempo-match stretch (naive).,"phase:5,area:audio,type:feature,priority:P3"
P6-6.1 Bundle CC0 factory kits,Add 2 drum kits under /public/assets/kits; seeder loads them.,"phase:6,area:content,type:feature,priority:P1"
P6-6.2 Bundle CC0 keys instrument,Add simple multisample under /public/assets/instruments; default in Keys view.,"phase:6,area:content,type:feature,priority:P2"
P6-6.3 Credits & license page,Add /about linking to CREDITS.md and LICENSE.md.,"phase:6,area:ui,type:feature,priority:P3"
P7-7.1 WAV export,Offline render loop/arrangement; write WAV 44.1k/16; re-import parity test.,"phase:7,area:export,type:feature,priority:P1"
P7-7.2 MP3 export via ffmpeg.wasm,Transcode WAV → MP3 192 kbps; verify duration matches.,"phase:7,area:export,type:feature,priority:P1"
P7-7.3 Project JSON import/export,Export .vibe.json; import replaces current project; round-trip test.,"phase:7,area:storage,type:feature,priority:P2"
P7-7.4 Local autosave (anonymous),idb-keyval autosave every 10s; Recent Projects list.,"phase:7,area:storage,type:feature,priority:P2"
P7-7.5 Supabase Auth & tables,"Initialize client; create tables (projects, assets, shares, ai_logs); RLS enabled.","phase:7,area:backend,type:feature,priority:P1"
P7-7.6 Cloud save & asset upload,Login enables save to Postgres (projects) and Storage (user-assets); signed URL fetch.,"phase:7,area:backend,type:feature,priority:P1"
P7-7.7 Share link route,Create /share/:slug read-only preview with 'Make a Copy'.,"phase:7,area:ui,type:feature,priority:P2"
P8-8.1 AI provider interface + mock,Pluggable provider with generateDrumPattern()/generateMelody(); mock returns Zod-valid JSON.,"phase:8,area:ai,type:feature,priority:P1"
P8-8.2 Prompt templates (few-shot),"Short templates with schema reminder; include tempo, grid, bars, style, key/scale, kit_map.","phase:8,area:ai,type:task,priority:P2"
P8-8.3 Pads/Keys UI integration,"Buttons: Generate (8/16/32), Density, Humanize/Contour, Re-roll, Keep previous as Track B.","phase:8,area:ui,type:feature,priority:P1"
P8-8.4 Auto-repair on invalid JSON,Retry once with repair prompt; else toast error.,"phase:8,area:ai,type:feature,priority:P1"
P8-8.5 Rate limits & telemetry,"1 req/2s, 5/min; log {tool, style, bars, beforeHash, afterHash} to ai_logs.","phase:8,area:ai,type:feature,priority:P2"
P9-9.1 A/B patterns & chain,"Duplicate to A and B; chain A,A,B,B; export respects chain.","phase:9,area:ui,type:feature,priority:P2"
P9-9.2 Onboarding & empty states,3-card intro; 'Try a demo project' button; helpful hints.,"phase:9,area:ui,type:feature,priority:P2"
P9-9.3 Hotkeys & help modal,Space play/stop; QWER pads; Z/X octave; +/- tempo.,"phase:9,area:ui,type:feature,priority:P2"
P9-9.4 Visual polish & favicon,"Focus rings, accessible contrast, favicon from logo concept.","phase:9,area:ui,type:task,priority:P3"
P10-10.1 Timing drift test,50-loop repeat; offline render exact; WAV length matches expected.,"phase:10,area:qa,type:test,priority:P1"
P10-10.2 Latency mode stability,Toggle Low/Stable during playback; no glitches.,"phase:10,area:qa,type:test,priority:P2"
P10-10.3 AI validity suite,20 Beat + 20 Melody generations; 100% valid JSON or graceful error.,"phase:10,area:qa,type:test,priority:P1"
P10-10.4 Recording cross-device,Desktop + iOS/Android: record 1–4 bars → assign to pad → play in sync.,"phase:10,area:qa,type:test,priority:P1"
P10-10.5 Error-handling paths,Permission denied; offline; quota exceeded; invalid file; AI fail → helpful messages.,"phase:10,area:qa,type:test,priority:P1"
P11-11.1 Script 90s demo,Record mic clap → send to pad → Generate Beat → tweak swing → Generate Melody → A/B chain → export MP3 → share link.,"phase:11,area:demo,type:task,priority:P1"
P11-11.2 Backup assets,Two prebuilt projects + exported WAV/MP3 backups.,"phase:11,area:demo,type:task,priority:P2"
P11-11.3 Submission pack,"README (run steps, tech notes, licenses), 60–90s video, live link.","phase:11,area:demo,type:task,priority:P1"
SEC-1 Content licensing page,Summarize CC0 policy; link external libraries (no redistribution).,"phase:6,area:content,type:task,priority:P2"
A11Y-1 Keyboard navigation for pads,Ensure focus outlines; ARIA labels; tab order predictable.,"phase:3,area:a11y,type:task,priority:P2"
DOCS-1 Contributing guide,"Add CONTRIBUTING.md with dev setup, scripts, code style.","phase:0,area:docs,type:task,priority:P3"
